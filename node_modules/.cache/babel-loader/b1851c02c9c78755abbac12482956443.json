{"ast":null,"code":"var e,\n    t = [\"scroll\", \"wheel\", \"touchstart\", \"touchmove\", \"touchenter\", \"touchend\", \"touchleave\", \"mouseout\", \"mouseleave\", \"mouseup\", \"mousedown\", \"mousemove\", \"mouseenter\", \"mousewheel\", \"mouseover\"];\n\nif (function () {\n  var e = !1;\n\n  try {\n    var t = Object.defineProperty({}, \"passive\", {\n      get: function () {\n        e = !0;\n      }\n    });\n    window.addEventListener(\"test\", null, t), window.removeEventListener(\"test\", null, t);\n  } catch (e) {}\n\n  return e;\n}()) {\n  var o = EventTarget.prototype.addEventListener;\n  e = o, EventTarget.prototype.addEventListener = function (o, r, n) {\n    var s,\n        a = \"object\" == typeof n && null !== n,\n        i = a ? n.capture : n;\n    (n = a ? function (e) {\n      var t = Object.getOwnPropertyDescriptor(e, \"passive\");\n      return t && !0 !== t.writable && void 0 === t.set ? Object.assign({}, e) : e;\n    }(n) : {}).passive = void 0 !== (s = n.passive) ? s : -1 !== t.indexOf(o) && !0, n.capture = void 0 !== i && i, e.call(this, o, r, n);\n  }, EventTarget.prototype.addEventListener._original = e;\n}","map":{"version":3,"sources":["../src/index.js","../src/utils.js"],"names":["supportedPassiveTypes","passive","undefined","indexOf","options","passiveDescriptor","Object","getOwnPropertyDescriptor","writable","set","assign","superMethod","EventTarget","prototype","addEventListener","type","listener","usesListenerOptions","useCapture","capture","getWritableOptions","call","this","_original","eventListenerOptionsSupported","addEvent","supported","opts","defineProperty","get","window","removeEventListener","e"],"mappings":"IAyB2BW,C;IAnBrBX,CAAAA,GAAwB,CAC5B,QAD4B,EAClB,OADkB,EAE5B,YAF4B,EAEd,WAFc,EAED,YAFC,EAEa,UAFb,EAEyB,YAFzB,EAG5B,UAH4B,EAGhB,YAHgB,EAGF,SAHE,EAGS,WAHT,EAGsB,WAHtB,EAGmC,YAHnC,EAGiD,YAHjD,EAG+D,WAH/D,C;;AAoC9B,IC1C6C,YAAA;AAC3C,MAAI0B,CAAAA,GAAAA,CAAY,CAAhB;;AAEA,MAAA;AACE,QAAMC,CAAAA,GAAOrB,MAAAA,CAAOsB,cAAPtB,CAAsB,EAAtBA,EAA0B,SAA1BA,EAAqC;AAChDuB,MAAAA,GAAAA,EAAAA,YAAAA;AACEH,QAAAA,CAAAA,GAAAA,CAAY,CAAZA;AAAY;AAFkC,KAArCpB,CAAb;AAMAwB,IAAAA,MAAAA,CAAOhB,gBAAPgB,CAAwB,MAAxBA,EAAgC,IAAhCA,EAAsCH,CAAtCG,GACAA,MAAAA,CAAOC,mBAAPD,CAA2B,MAA3BA,EAAmC,IAAnCA,EAAyCH,CAAzCG,CADAA;AAEA,GATF,CASE,OAAOE,CAAP,EAAOA,CAET;;AAAA,SAAON,CAAP;AD0BsBF,CCxCqB,ED0C7C,EAAqB;AACnB,MAAMC,CAAAA,GAAWb,WAAAA,CAAYC,SAAZD,CAAsBE,gBAAvC;AAlByBH,EAAAA,CAAAA,GAmBPc,CAnBOd,EACzBC,WAAAA,CAAYC,SAAZD,CAAsBE,gBAAtBF,GAAyC,UAAUG,CAAV,EAAgBC,CAAhB,EAA0BZ,CAA1B,EAA0BA;AACjE,QAhB6BH,CAgB7B;AAAA,QAAMgB,CAAAA,GAAyC,YAAA,OAAZb,CAAY,IAAwB,SAAZA,CAA3D;AAAA,QACMc,CAAAA,GAAsBD,CAAAA,GAAsBb,CAAAA,CAAQe,OAA9BF,GAAwCb,CADpE;AACoEA,KAEpEA,CAAAA,GAAkBa,CAAAA,GAbK,UAACb,CAAD,EAACA;AAC1B,UAAMC,CAAAA,GAAoBC,MAAAA,CAAOC,wBAAPD,CAAgCF,CAAhCE,EAAyC,SAAzCA,CAA1B;AAEA,aAAOD,CAAAA,IAAAA,CAAoD,CAApDA,KAAqBA,CAAAA,CAAkBG,QAAvCH,IAAuCG,KAA+CN,CAA/CM,KAAqBH,CAAAA,CAAkBI,GAA9EJ,GACHC,MAAAA,CAAOI,MAAPJ,CAAc,EAAdA,EAAkBF,CAAlBE,CADGD,GAEHD,CAFJ;AAU0CgB,KAbjB,CAaoChB,CAbpC,CAaLa,GAAoD,EAFFb,EAG5DH,OAH4DG,GAG5DH,KAnBMC,CAmBND,MApBqBA,CAAAA,GAoBaG,CAAAA,CAAQH,OAA1CA,IAnBwBA,CAmBxBA,GAnBwBA,CAEmB,CAFnBA,KAE3BD,CAAAA,CAAsBG,OAAtBH,CAiBsDe,CAjBtDf,CAF2BC,IAmB2Bc,CA5BpD,CAyB6DX,EAIpEA,CAAAA,CAAQe,OAARf,GAAQe,KAAyBjB,CAAzBiB,KAAUD,CAAVC,IAA8DD,CAJFd,EAMpEO,CAAAA,CAAYU,IAAZV,CAAiBW,IAAjBX,EAAuBI,CAAvBJ,EAA6BK,CAA7BL,EAAuCP,CAAvCO,CANoEP;AAM7BA,GAThBO,EAYzBC,WAAAA,CAAYC,SAAZD,CAAsBE,gBAAtBF,CAAuCW,SAAvCX,GAAmDD,CAZ1BA;AAY0BA","sourcesContent":["import { eventListenerOptionsSupported } from './utils';\n\nconst defaultOptions = {\n  passive: true,\n  capture: false\n};\nconst supportedPassiveTypes = [\n  'scroll', 'wheel',\n  'touchstart', 'touchmove', 'touchenter', 'touchend', 'touchleave',\n  'mouseout', 'mouseleave', 'mouseup', 'mousedown', 'mousemove', 'mouseenter', 'mousewheel', 'mouseover'\n];\nconst getDefaultPassiveOption = (passive, eventName) => {\n  if (passive !== undefined) return passive;\n\n  return supportedPassiveTypes.indexOf(eventName) === -1 ? false : defaultOptions.passive;\n};\n\nconst getWritableOptions = (options) => {\n  const passiveDescriptor = Object.getOwnPropertyDescriptor(options, 'passive');\n    \n  return passiveDescriptor && passiveDescriptor.writable !== true && passiveDescriptor.set === undefined\n    ? Object.assign({}, options)\n    : options;\n};\n\nconst overwriteAddEvent = (superMethod) => {\n  EventTarget.prototype.addEventListener = function (type, listener, options) {\n    const usesListenerOptions = typeof options === 'object' && options !== null;\n    const useCapture          = usesListenerOptions ? options.capture : options;\n\n    options         = usesListenerOptions ? getWritableOptions(options) : {};\n    options.passive = getDefaultPassiveOption(options.passive, type);\n    options.capture = useCapture === undefined ? defaultOptions.capture : useCapture;\n\n    superMethod.call(this, type, listener, options);\n  };\n\n  EventTarget.prototype.addEventListener._original = superMethod;\n};\n\nconst supportsPassive = eventListenerOptionsSupported();\n\nif (supportsPassive) {\n  const addEvent = EventTarget.prototype.addEventListener;\n  overwriteAddEvent(addEvent);\n}\n","export const eventListenerOptionsSupported = () => {\n  let supported = false;\n\n  try {\n    const opts = Object.defineProperty({}, 'passive', {\n      get() {\n        supported = true;\n      }\n    });\n\n    window.addEventListener('test', null, opts);\n    window.removeEventListener('test', null, opts);\n  } catch (e) {}\n\n  return supported;\n}\n"]},"metadata":{},"sourceType":"script"}