{"ast":null,"code":"\"use strict\";\n/**\n * @file 多边形覆盖物\n * @author hedongran\n * @email hdr01@126.com\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar Graphy_1 = tslib_1.__importDefault(require(\"./Graphy\"));\n\nvar shallowequal_1 = tslib_1.__importDefault(require(\"shallowequal\"));\n\n;\n/**\n * 在地图上绘制简单的多边形\n * @visibleName Polygon 多边形\n */\n\nvar Polygon =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Polygon, _super);\n\n  function Polygon(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.options = ['strokeColor', 'strokeWeight', 'strokeOpacity', 'strokeStyle', 'fillColor', 'fillOpacity', 'enableMassClear', 'enableEditing'];\n    return _this;\n  }\n\n  Polygon.prototype.onDataUpdate = function (prevProps) {\n    var _a = this.props,\n        path = _a.path,\n        autoViewport = _a.autoViewport;\n    var prePath = prevProps.path,\n        preViewport = prevProps.autoViewport;\n    var isDataChanged = path && !shallowequal_1.default(path, prePath);\n    var isViewportChanged = !shallowequal_1.default(autoViewport, preViewport);\n\n    if (isDataChanged) {\n      this.overlay.setPath(this.parsePath(path));\n    }\n\n    if (autoViewport && (isDataChanged || isViewportChanged)) {\n      var path_1 = this.overlay.getPath();\n      var viewport = this.props.map.getViewport(path_1, this.props.viewportOptions || {});\n      this.props.map.setViewport(viewport);\n    }\n  };\n\n  Polygon.prototype.getOverlay = function () {\n    var path = this.parsePath(this.props.path);\n    return new BMapGL.Polygon(path, this.getOptions());\n  };\n\n  Polygon.prototype.parsePath = function (path) {\n    var isMC = this.props.coordType === 'bd09mc';\n    var out = path.map(function (position) {\n      var point;\n\n      if (position instanceof Array) {\n        point = new BMapGL.Point(position[0], position[1]);\n      } else if (position instanceof BMapGL.Point) {\n        point = position;\n      } else {\n        point = new BMapGL.Point(position.lng, position.lat);\n      }\n\n      if (isMC) {\n        point = BMapGL.Projection.convertMC2LL(point);\n      }\n\n      return point;\n    });\n    return out;\n  };\n\n  Polygon.prototype.render = function () {\n    return null;\n  };\n\n  return Polygon;\n}(Graphy_1.default);\n\nexports.default = Polygon;","map":{"version":3,"sources":["D:/WebStorm Project/flowingcloud/node_modules/react-bmapgl/Overlay/Polygon.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","Graphy_1","__importDefault","shallowequal_1","Polygon","_super","__extends","props","_this","call","options","prototype","onDataUpdate","prevProps","_a","path","autoViewport","prePath","preViewport","isDataChanged","default","isViewportChanged","overlay","setPath","parsePath","path_1","getPath","viewport","map","getViewport","viewportOptions","setViewport","getOverlay","BMapGL","getOptions","isMC","coordType","out","position","point","Array","Point","lng","lat","Projection","convertMC2LL","render"],"mappings":"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","sourcesContent":["\"use strict\";\n/**\n * @file 多边形覆盖物\n * @author hedongran\n * @email hdr01@126.com\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar Graphy_1 = tslib_1.__importDefault(require(\"./Graphy\"));\nvar shallowequal_1 = tslib_1.__importDefault(require(\"shallowequal\"));\n;\n/**\n * 在地图上绘制简单的多边形\n * @visibleName Polygon 多边形\n */\nvar Polygon = /** @class */ (function (_super) {\n    tslib_1.__extends(Polygon, _super);\n    function Polygon(props) {\n        var _this = _super.call(this, props) || this;\n        _this.options = [\n            'strokeColor',\n            'strokeWeight',\n            'strokeOpacity',\n            'strokeStyle',\n            'fillColor',\n            'fillOpacity',\n            'enableMassClear',\n            'enableEditing',\n        ];\n        return _this;\n    }\n    Polygon.prototype.onDataUpdate = function (prevProps) {\n        var _a = this.props, path = _a.path, autoViewport = _a.autoViewport;\n        var prePath = prevProps.path, preViewport = prevProps.autoViewport;\n        var isDataChanged = path && !shallowequal_1.default(path, prePath);\n        var isViewportChanged = !shallowequal_1.default(autoViewport, preViewport);\n        if (isDataChanged) {\n            this.overlay.setPath(this.parsePath(path));\n        }\n        if (autoViewport && (isDataChanged || isViewportChanged)) {\n            var path_1 = this.overlay.getPath();\n            var viewport = this.props.map.getViewport(path_1, this.props.viewportOptions || {});\n            this.props.map.setViewport(viewport);\n        }\n    };\n    Polygon.prototype.getOverlay = function () {\n        var path = this.parsePath(this.props.path);\n        return new BMapGL.Polygon(path, this.getOptions());\n    };\n    Polygon.prototype.parsePath = function (path) {\n        var isMC = this.props.coordType === 'bd09mc';\n        var out = path.map(function (position) {\n            var point;\n            if (position instanceof Array) {\n                point = new BMapGL.Point(position[0], position[1]);\n            }\n            else if (position instanceof BMapGL.Point) {\n                point = position;\n            }\n            else {\n                point = new BMapGL.Point(position.lng, position.lat);\n            }\n            if (isMC) {\n                point = BMapGL.Projection.convertMC2LL(point);\n            }\n            return point;\n        });\n        return out;\n    };\n    Polygon.prototype.render = function () {\n        return null;\n    };\n    return Polygon;\n}(Graphy_1.default));\nexports.default = Polygon;\n"]},"metadata":{},"sourceType":"script"}