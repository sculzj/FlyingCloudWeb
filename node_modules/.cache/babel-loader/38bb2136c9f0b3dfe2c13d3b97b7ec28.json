{"ast":null,"code":"\"use strict\";\n/**\n * @file 图形基类\n * @author hedongran\n * @email hdr01@126.com\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar common_1 = require(\"../common\");\n\nvar WrapperHOC_1 = tslib_1.__importDefault(require(\"../common/WrapperHOC\"));\n\nvar shallowequal_1 = tslib_1.__importDefault(require(\"shallowequal\"));\n\nvar Map_1 = require(\"../Map\");\n\n;\nvar eventsMap = ['click', 'dblclick', 'rightclick', 'mousedown', 'mouseup', 'mouseout', 'mouseover', 'mousemove', 'remove', 'lineupdate'];\nvar methodsMap = {\n  enableMassClear: ['enableMassClear', 'disableMassClear'],\n  enableEditing: ['enableEditing', 'disableEditing']\n};\n\nvar Graphy =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Graphy, _super);\n\n  function Graphy(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.options = ['strokeColor', 'strokeWeight', 'strokeOpacity', 'strokeStyle', 'fillColor', 'fillOpacity', 'enableMassClear', 'enableEditing', 'enableClicking'];\n    return _this;\n  }\n\n  Graphy.prototype.componentDidUpdate = function (prevProps) {\n    var _a = this.props,\n        strokeColor = _a.strokeColor,\n        strokeWeight = _a.strokeWeight,\n        strokeOpacity = _a.strokeOpacity,\n        strokeStyle = _a.strokeStyle,\n        fillColor = _a.fillColor,\n        fillOpacity = _a.fillOpacity;\n    var preStrokeColor = prevProps.strokeColor,\n        preStrokeWeight = prevProps.strokeWeight,\n        preStrokeOpacity = prevProps.strokeOpacity,\n        preStrokeStyle = prevProps.strokeStyle,\n        preFillColor = prevProps.fillColor,\n        preFillOpacity = prevProps.fillOpacity;\n    var isStrokeColorChanged = !shallowequal_1.default(strokeColor, preStrokeColor);\n    var isStrokeWeightChanged = !shallowequal_1.default(strokeWeight, preStrokeWeight);\n    var isStrokeOpacityChanged = !shallowequal_1.default(strokeOpacity, preStrokeOpacity);\n    var isStrokeStyleChanged = !shallowequal_1.default(strokeStyle, preStrokeStyle);\n    var isFillColorChanged = !shallowequal_1.default(fillColor, preFillColor);\n    var isFillOpacityChanged = !shallowequal_1.default(fillOpacity, preFillOpacity);\n\n    if (isStrokeColorChanged || isStrokeWeightChanged || isStrokeOpacityChanged || isStrokeStyleChanged || isFillColorChanged || isFillOpacityChanged) {\n      this.overlay.setOptions(this.getOptions());\n    }\n\n    this.onDataUpdate(prevProps);\n  };\n\n  Graphy.prototype.componentDidMount = function () {\n    this.initialize();\n  };\n\n  Graphy.prototype.componentWillUnmount = function () {\n    this.destroy();\n  };\n\n  Graphy.prototype.destroy = function () {\n    if (this.overlay) {\n      this.map.removeOverlay(this.overlay); // @ts-ignore\n\n      this.instance = this.overlay = undefined;\n    }\n  };\n\n  Graphy.prototype.initialize = function () {\n    var map = this.map = this.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    this.destroy();\n    this.instance = this.overlay = this.getOverlay();\n    map.addOverlay(this.overlay);\n    var viewport;\n\n    if (this.overlay instanceof BMapGL.Polyline || this.overlay instanceof BMapGL.Polygon) {\n      var path = this.overlay.getPath();\n      viewport = map.getViewport(path, this.props.viewportOptions || {});\n    } else if (this.overlay instanceof BMapGL.Circle) {\n      var bounds = this.overlay.getBounds();\n      viewport = map.getViewport(bounds, this.props.viewportOptions || {});\n    }\n\n    if (viewport && this.props.autoViewport) {\n      map.setViewport(viewport);\n    }\n  };\n\n  Graphy.prototype.getOverlay = function () {\n    throw new Error('Method getOverlay not implemented.');\n  };\n\n  Graphy.prototype.onDataUpdate = function (prevProps) {\n    throw new Error('Method onDataUpdate not implemented.');\n  };\n\n  Graphy.contextType = Map_1.MapContext;\n  return Graphy;\n}(common_1.Component);\n\nexports.default = WrapperHOC_1.default(Graphy, eventsMap, methodsMap);","map":{"version":3,"sources":["D:/WebStorm Project/flowingcloud/node_modules/react-bmapgl/Overlay/Graphy.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","common_1","WrapperHOC_1","__importDefault","shallowequal_1","Map_1","eventsMap","methodsMap","enableMassClear","enableEditing","Graphy","_super","__extends","props","_this","call","options","prototype","componentDidUpdate","prevProps","_a","strokeColor","strokeWeight","strokeOpacity","strokeStyle","fillColor","fillOpacity","preStrokeColor","preStrokeWeight","preStrokeOpacity","preStrokeStyle","preFillColor","preFillOpacity","isStrokeColorChanged","default","isStrokeWeightChanged","isStrokeOpacityChanged","isStrokeStyleChanged","isFillColorChanged","isFillOpacityChanged","overlay","setOptions","getOptions","onDataUpdate","componentDidMount","initialize","componentWillUnmount","destroy","map","removeOverlay","instance","undefined","getMap","getOverlay","addOverlay","viewport","BMapGL","Polyline","Polygon","path","getPath","getViewport","viewportOptions","Circle","bounds","getBounds","autoViewport","setViewport","Error","contextType","MapContext","Component"],"mappings":"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","sourcesContent":["\"use strict\";\n/**\n * @file 图形基类\n * @author hedongran\n * @email hdr01@126.com\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar common_1 = require(\"../common\");\nvar WrapperHOC_1 = tslib_1.__importDefault(require(\"../common/WrapperHOC\"));\nvar shallowequal_1 = tslib_1.__importDefault(require(\"shallowequal\"));\nvar Map_1 = require(\"../Map\");\n;\nvar eventsMap = [\n    'click',\n    'dblclick',\n    'rightclick',\n    'mousedown',\n    'mouseup',\n    'mouseout',\n    'mouseover',\n    'mousemove',\n    'remove',\n    'lineupdate'\n];\nvar methodsMap = {\n    enableMassClear: ['enableMassClear', 'disableMassClear'],\n    enableEditing: ['enableEditing', 'disableEditing'],\n};\nvar Graphy = /** @class */ (function (_super) {\n    tslib_1.__extends(Graphy, _super);\n    function Graphy(props) {\n        var _this = _super.call(this, props) || this;\n        _this.options = [\n            'strokeColor',\n            'strokeWeight',\n            'strokeOpacity',\n            'strokeStyle',\n            'fillColor',\n            'fillOpacity',\n            'enableMassClear',\n            'enableEditing',\n            'enableClicking'\n        ];\n        return _this;\n    }\n    Graphy.prototype.componentDidUpdate = function (prevProps) {\n        var _a = this.props, strokeColor = _a.strokeColor, strokeWeight = _a.strokeWeight, strokeOpacity = _a.strokeOpacity, strokeStyle = _a.strokeStyle, fillColor = _a.fillColor, fillOpacity = _a.fillOpacity;\n        var preStrokeColor = prevProps.strokeColor, preStrokeWeight = prevProps.strokeWeight, preStrokeOpacity = prevProps.strokeOpacity, preStrokeStyle = prevProps.strokeStyle, preFillColor = prevProps.fillColor, preFillOpacity = prevProps.fillOpacity;\n        var isStrokeColorChanged = !shallowequal_1.default(strokeColor, preStrokeColor);\n        var isStrokeWeightChanged = !shallowequal_1.default(strokeWeight, preStrokeWeight);\n        var isStrokeOpacityChanged = !shallowequal_1.default(strokeOpacity, preStrokeOpacity);\n        var isStrokeStyleChanged = !shallowequal_1.default(strokeStyle, preStrokeStyle);\n        var isFillColorChanged = !shallowequal_1.default(fillColor, preFillColor);\n        var isFillOpacityChanged = !shallowequal_1.default(fillOpacity, preFillOpacity);\n        if (isStrokeColorChanged || isStrokeWeightChanged || isStrokeOpacityChanged || isStrokeStyleChanged\n            || isFillColorChanged || isFillOpacityChanged) {\n            this.overlay.setOptions(this.getOptions());\n        }\n        this.onDataUpdate(prevProps);\n    };\n    Graphy.prototype.componentDidMount = function () {\n        this.initialize();\n    };\n    Graphy.prototype.componentWillUnmount = function () {\n        this.destroy();\n    };\n    Graphy.prototype.destroy = function () {\n        if (this.overlay) {\n            this.map.removeOverlay(this.overlay);\n            // @ts-ignore\n            this.instance = this.overlay = undefined;\n        }\n    };\n    Graphy.prototype.initialize = function () {\n        var map = this.map = this.getMap();\n        if (!map) {\n            return;\n        }\n        this.destroy();\n        this.instance = this.overlay = this.getOverlay();\n        map.addOverlay(this.overlay);\n        var viewport;\n        if (this.overlay instanceof BMapGL.Polyline || this.overlay instanceof BMapGL.Polygon) {\n            var path = this.overlay.getPath();\n            viewport = map.getViewport(path, this.props.viewportOptions || {});\n        }\n        else if (this.overlay instanceof BMapGL.Circle) {\n            var bounds = this.overlay.getBounds();\n            viewport = map.getViewport(bounds, this.props.viewportOptions || {});\n        }\n        if (viewport && this.props.autoViewport) {\n            map.setViewport(viewport);\n        }\n    };\n    Graphy.prototype.getOverlay = function () {\n        throw new Error('Method getOverlay not implemented.');\n    };\n    Graphy.prototype.onDataUpdate = function (prevProps) {\n        throw new Error('Method onDataUpdate not implemented.');\n    };\n    Graphy.contextType = Map_1.MapContext;\n    return Graphy;\n}(common_1.Component));\nexports.default = WrapperHOC_1.default(Graphy, eventsMap, methodsMap);\n"]},"metadata":{},"sourceType":"script"}