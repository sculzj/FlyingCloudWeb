{"ast":null,"code":"\"use strict\";\n/**\n * @file 控件基类\n * @author hedongran\n * @email hdr01@126.com\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar common_1 = require(\"../common\");\n\nvar shallowequal_1 = tslib_1.__importDefault(require(\"shallowequal\"));\n\nvar Map_1 = require(\"../Map\");\n\nvar Control =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Control, _super);\n\n  function Control(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.options = ['anchor', 'offset'];\n    return _this;\n  }\n\n  Control.prototype.componentDidUpdate = function (prevProps) {\n    if (!this.map) {\n      this.initialize();\n      return;\n    }\n\n    var _a = this.props,\n        anchor = _a.anchor,\n        offset = _a.offset;\n    var preAnchor = prevProps.anchor,\n        preOffset = prevProps.offset;\n    var isAnchorChanged = !shallowequal_1.default(anchor, preAnchor);\n    var isOffsetChanged = !shallowequal_1.default(offset, preOffset);\n\n    if (anchor && isAnchorChanged) {\n      this.control.setAnchor(anchor);\n    }\n\n    if (offset && isOffsetChanged) {\n      this.control.setOffset(offset);\n    }\n  };\n\n  Control.prototype.componentDidMount = function () {\n    this.initialize();\n  };\n\n  Control.prototype.componentWillUnmount = function () {\n    this.destroy();\n  };\n\n  Control.prototype.destroy = function () {\n    if (this.control && this.map) {\n      this.map.removeControl(this.control); // @ts-ignore\n\n      this.control = null;\n    }\n  };\n\n  Control.prototype.initialize = function () {\n    var map = this.map = this.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    this.destroy();\n    this.control = this.getControl();\n    map.addControl(this.control);\n  };\n\n  Control.prototype.getControl = function () {\n    throw new Error('Method getControl not implemented.');\n  };\n\n  Control.contextType = Map_1.MapContext;\n  return Control;\n}(common_1.Component);\n\nexports.default = Control;","map":{"version":3,"sources":["D:/WebStorm Project/flowingcloud/node_modules/react-bmapgl/Control/Control.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","common_1","shallowequal_1","__importDefault","Map_1","Control","_super","__extends","props","_this","call","options","prototype","componentDidUpdate","prevProps","map","initialize","_a","anchor","offset","preAnchor","preOffset","isAnchorChanged","default","isOffsetChanged","control","setAnchor","setOffset","componentDidMount","componentWillUnmount","destroy","removeControl","getMap","getControl","addControl","Error","contextType","MapContext","Component"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,WAAD,CAAtB;;AACA,IAAIE,cAAc,GAAGH,OAAO,CAACI,eAAR,CAAwBH,OAAO,CAAC,cAAD,CAA/B,CAArB;;AACA,IAAII,KAAK,GAAGJ,OAAO,CAAC,QAAD,CAAnB;;AACA,IAAIK,OAAO;AAAG;AAAe,UAAUC,MAAV,EAAkB;AAC3CP,EAAAA,OAAO,CAACQ,SAAR,CAAkBF,OAAlB,EAA2BC,MAA3B;;AACA,WAASD,OAAT,CAAiBG,KAAjB,EAAwB;AACpB,QAAIC,KAAK,GAAGH,MAAM,CAACI,IAAP,CAAY,IAAZ,EAAkBF,KAAlB,KAA4B,IAAxC;;AACAC,IAAAA,KAAK,CAACE,OAAN,GAAgB,CACZ,QADY,EAEZ,QAFY,CAAhB;AAIA,WAAOF,KAAP;AACH;;AACDJ,EAAAA,OAAO,CAACO,SAAR,CAAkBC,kBAAlB,GAAuC,UAAUC,SAAV,EAAqB;AACxD,QAAI,CAAC,KAAKC,GAAV,EAAe;AACX,WAAKC,UAAL;AACA;AACH;;AACD,QAAIC,EAAE,GAAG,KAAKT,KAAd;AAAA,QAAqBU,MAAM,GAAGD,EAAE,CAACC,MAAjC;AAAA,QAAyCC,MAAM,GAAGF,EAAE,CAACE,MAArD;AACA,QAAIC,SAAS,GAAGN,SAAS,CAACI,MAA1B;AAAA,QAAkCG,SAAS,GAAGP,SAAS,CAACK,MAAxD;AACA,QAAIG,eAAe,GAAG,CAACpB,cAAc,CAACqB,OAAf,CAAuBL,MAAvB,EAA+BE,SAA/B,CAAvB;AACA,QAAII,eAAe,GAAG,CAACtB,cAAc,CAACqB,OAAf,CAAuBJ,MAAvB,EAA+BE,SAA/B,CAAvB;;AACA,QAAIH,MAAM,IAAII,eAAd,EAA+B;AAC3B,WAAKG,OAAL,CAAaC,SAAb,CAAuBR,MAAvB;AACH;;AACD,QAAIC,MAAM,IAAIK,eAAd,EAA+B;AAC3B,WAAKC,OAAL,CAAaE,SAAb,CAAuBR,MAAvB;AACH;AACJ,GAfD;;AAgBAd,EAAAA,OAAO,CAACO,SAAR,CAAkBgB,iBAAlB,GAAsC,YAAY;AAC9C,SAAKZ,UAAL;AACH,GAFD;;AAGAX,EAAAA,OAAO,CAACO,SAAR,CAAkBiB,oBAAlB,GAAyC,YAAY;AACjD,SAAKC,OAAL;AACH,GAFD;;AAGAzB,EAAAA,OAAO,CAACO,SAAR,CAAkBkB,OAAlB,GAA4B,YAAY;AACpC,QAAI,KAAKL,OAAL,IAAgB,KAAKV,GAAzB,EAA8B;AAC1B,WAAKA,GAAL,CAASgB,aAAT,CAAuB,KAAKN,OAA5B,EAD0B,CAE1B;;AACA,WAAKA,OAAL,GAAe,IAAf;AACH;AACJ,GAND;;AAOApB,EAAAA,OAAO,CAACO,SAAR,CAAkBI,UAAlB,GAA+B,YAAY;AACvC,QAAID,GAAG,GAAG,KAAKA,GAAL,GAAW,KAAKiB,MAAL,EAArB;;AACA,QAAI,CAACjB,GAAL,EAAU;AACN;AACH;;AACD,SAAKe,OAAL;AACA,SAAKL,OAAL,GAAe,KAAKQ,UAAL,EAAf;AACAlB,IAAAA,GAAG,CAACmB,UAAJ,CAAe,KAAKT,OAApB;AACH,GARD;;AASApB,EAAAA,OAAO,CAACO,SAAR,CAAkBqB,UAAlB,GAA+B,YAAY;AACvC,UAAM,IAAIE,KAAJ,CAAU,oCAAV,CAAN;AACH,GAFD;;AAGA9B,EAAAA,OAAO,CAAC+B,WAAR,GAAsBhC,KAAK,CAACiC,UAA5B;AACA,SAAOhC,OAAP;AACH,CArD4B,CAqD3BJ,QAAQ,CAACqC,SArDkB,CAA7B;;AAsDAzC,OAAO,CAAC0B,OAAR,GAAkBlB,OAAlB","sourcesContent":["\"use strict\";\n/**\n * @file 控件基类\n * @author hedongran\n * @email hdr01@126.com\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar common_1 = require(\"../common\");\nvar shallowequal_1 = tslib_1.__importDefault(require(\"shallowequal\"));\nvar Map_1 = require(\"../Map\");\nvar Control = /** @class */ (function (_super) {\n    tslib_1.__extends(Control, _super);\n    function Control(props) {\n        var _this = _super.call(this, props) || this;\n        _this.options = [\n            'anchor',\n            'offset'\n        ];\n        return _this;\n    }\n    Control.prototype.componentDidUpdate = function (prevProps) {\n        if (!this.map) {\n            this.initialize();\n            return;\n        }\n        var _a = this.props, anchor = _a.anchor, offset = _a.offset;\n        var preAnchor = prevProps.anchor, preOffset = prevProps.offset;\n        var isAnchorChanged = !shallowequal_1.default(anchor, preAnchor);\n        var isOffsetChanged = !shallowequal_1.default(offset, preOffset);\n        if (anchor && isAnchorChanged) {\n            this.control.setAnchor(anchor);\n        }\n        if (offset && isOffsetChanged) {\n            this.control.setOffset(offset);\n        }\n    };\n    Control.prototype.componentDidMount = function () {\n        this.initialize();\n    };\n    Control.prototype.componentWillUnmount = function () {\n        this.destroy();\n    };\n    Control.prototype.destroy = function () {\n        if (this.control && this.map) {\n            this.map.removeControl(this.control);\n            // @ts-ignore\n            this.control = null;\n        }\n    };\n    Control.prototype.initialize = function () {\n        var map = this.map = this.getMap();\n        if (!map) {\n            return;\n        }\n        this.destroy();\n        this.control = this.getControl();\n        map.addControl(this.control);\n    };\n    Control.prototype.getControl = function () {\n        throw new Error('Method getControl not implemented.');\n    };\n    Control.contextType = Map_1.MapContext;\n    return Control;\n}(common_1.Component));\nexports.default = Control;\n"]},"metadata":{},"sourceType":"script"}