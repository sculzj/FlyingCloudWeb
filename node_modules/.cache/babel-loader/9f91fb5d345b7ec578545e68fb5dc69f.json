{"ast":null,"code":"\"use strict\";\n/**\n * @file 异步加载css和script\n * @author hedongran\n * @email hdr01@126.com\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.requireScript = exports.requireCss = void 0;\nvar headElement = document.head || document.getElementsByTagName('head')[0];\nvar _importedScript = {};\n/**\n * load dependency by css tag\n */\n\nfunction requireCss(src) {\n  return new Promise(function (resolve, reject) {\n    if (src in _importedScript) {\n      resolve();\n      return;\n    }\n\n    var script = document.createElement('link');\n    script.type = 'text/css';\n    script.rel = 'stylesheet';\n    script.href = src; // 加载失败\n\n    script.onerror = function (err) {\n      headElement.removeChild(script);\n      reject(new URIError(\"The css \" + src + \" is no accessible.\"));\n    }; // 加载成功\n\n\n    script.onload = function () {\n      _importedScript[src] = true;\n      resolve();\n    };\n\n    headElement.appendChild(script);\n  });\n}\n\nexports.requireCss = requireCss;\n/**\n * load dependency by script tag\n */\n\nfunction requireScript(src) {\n  return new Promise(function (resolve, reject) {\n    if (src in _importedScript) {\n      resolve();\n      return;\n    }\n\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = src; // 加载失败\n\n    script.onerror = function (err) {\n      headElement.removeChild(script);\n      reject(new URIError(\"The Script \" + src + \" is no accessible.\"));\n    }; // 加载成功\n\n\n    if (isImplementedOnload(script)) {\n      // Firefox, Safari, Chrome, and Opera\n      script.onload = function () {\n        _importedScript[src] = true;\n        resolve();\n      };\n    } else {\n      // IE\n      script.onreadystatechange = function () {\n        if (script.readyState == 'loaded' || script.readyState == 'complete') {\n          script.onreadystatechange = null;\n          _importedScript[src] = true;\n          resolve();\n        }\n      };\n    }\n\n    headElement.appendChild(script);\n  });\n}\n\nexports.requireScript = requireScript;\n\nfunction isImplementedOnload(script) {\n  script = script || document.createElement('script');\n\n  if ('onload' in script) {\n    return true;\n  } // @ts-ignore\n\n\n  script.setAttribute('onload', '');\n  return typeof script['onload'] === 'function'; // ff true ie false .\n}","map":{"version":3,"sources":["D:/WebStorm Project/flowingcloud/node_modules/react-bmapgl/utils/requireScript.js"],"names":["Object","defineProperty","exports","value","requireScript","requireCss","headElement","document","head","getElementsByTagName","_importedScript","src","Promise","resolve","reject","script","createElement","type","rel","href","onerror","err","removeChild","URIError","onload","appendChild","isImplementedOnload","onreadystatechange","readyState","setAttribute"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,aAAR,GAAwBF,OAAO,CAACG,UAAR,GAAqB,KAAK,CAAlD;AACA,IAAIC,WAAW,GAAGC,QAAQ,CAACC,IAAT,IAAiBD,QAAQ,CAACE,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAnC;AACA,IAAIC,eAAe,GAAG,EAAtB;AACA;AACA;AACA;;AACA,SAASL,UAAT,CAAoBM,GAApB,EAAyB;AACrB,SAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1C,QAAIH,GAAG,IAAID,eAAX,EAA4B;AACxBG,MAAAA,OAAO;AACP;AACH;;AACD,QAAIE,MAAM,GAAGR,QAAQ,CAACS,aAAT,CAAuB,MAAvB,CAAb;AACAD,IAAAA,MAAM,CAACE,IAAP,GAAc,UAAd;AACAF,IAAAA,MAAM,CAACG,GAAP,GAAa,YAAb;AACAH,IAAAA,MAAM,CAACI,IAAP,GAAcR,GAAd,CAR0C,CAS1C;;AACAI,IAAAA,MAAM,CAACK,OAAP,GAAiB,UAAUC,GAAV,EAAe;AAC5Bf,MAAAA,WAAW,CAACgB,WAAZ,CAAwBP,MAAxB;AACAD,MAAAA,MAAM,CAAC,IAAIS,QAAJ,CAAa,aAAaZ,GAAb,GAAmB,oBAAhC,CAAD,CAAN;AACH,KAHD,CAV0C,CAc1C;;;AACAI,IAAAA,MAAM,CAACS,MAAP,GAAgB,YAAY;AACxBd,MAAAA,eAAe,CAACC,GAAD,CAAf,GAAuB,IAAvB;AACAE,MAAAA,OAAO;AACV,KAHD;;AAIAP,IAAAA,WAAW,CAACmB,WAAZ,CAAwBV,MAAxB;AACH,GApBM,CAAP;AAqBH;;AACDb,OAAO,CAACG,UAAR,GAAqBA,UAArB;AACA;AACA;AACA;;AACA,SAASD,aAAT,CAAuBO,GAAvB,EAA4B;AACxB,SAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1C,QAAIH,GAAG,IAAID,eAAX,EAA4B;AACxBG,MAAAA,OAAO;AACP;AACH;;AACD,QAAIE,MAAM,GAAGR,QAAQ,CAACS,aAAT,CAAuB,QAAvB,CAAb;AACAD,IAAAA,MAAM,CAACE,IAAP,GAAc,iBAAd;AACAF,IAAAA,MAAM,CAACJ,GAAP,GAAaA,GAAb,CAP0C,CAQ1C;;AACAI,IAAAA,MAAM,CAACK,OAAP,GAAiB,UAAUC,GAAV,EAAe;AAC5Bf,MAAAA,WAAW,CAACgB,WAAZ,CAAwBP,MAAxB;AACAD,MAAAA,MAAM,CAAC,IAAIS,QAAJ,CAAa,gBAAgBZ,GAAhB,GAAsB,oBAAnC,CAAD,CAAN;AACH,KAHD,CAT0C,CAa1C;;;AACA,QAAIe,mBAAmB,CAACX,MAAD,CAAvB,EAAiC;AAC7B;AACAA,MAAAA,MAAM,CAACS,MAAP,GAAgB,YAAY;AACxBd,QAAAA,eAAe,CAACC,GAAD,CAAf,GAAuB,IAAvB;AACAE,QAAAA,OAAO;AACV,OAHD;AAIH,KAND,MAOK;AACD;AACAE,MAAAA,MAAM,CAACY,kBAAP,GAA4B,YAAY;AACpC,YAAIZ,MAAM,CAACa,UAAP,IAAqB,QAArB,IAAiCb,MAAM,CAACa,UAAP,IAAqB,UAA1D,EAAsE;AAClEb,UAAAA,MAAM,CAACY,kBAAP,GAA4B,IAA5B;AACAjB,UAAAA,eAAe,CAACC,GAAD,CAAf,GAAuB,IAAvB;AACAE,UAAAA,OAAO;AACV;AACJ,OAND;AAOH;;AACDP,IAAAA,WAAW,CAACmB,WAAZ,CAAwBV,MAAxB;AACH,GAhCM,CAAP;AAiCH;;AACDb,OAAO,CAACE,aAAR,GAAwBA,aAAxB;;AACA,SAASsB,mBAAT,CAA6BX,MAA7B,EAAqC;AACjCA,EAAAA,MAAM,GAAGA,MAAM,IAAIR,QAAQ,CAACS,aAAT,CAAuB,QAAvB,CAAnB;;AACA,MAAI,YAAYD,MAAhB,EAAwB;AACpB,WAAO,IAAP;AACH,GAJgC,CAKjC;;;AACAA,EAAAA,MAAM,CAACc,YAAP,CAAoB,QAApB,EAA8B,EAA9B;AACA,SAAO,OAAOd,MAAM,CAAC,QAAD,CAAb,KAA4B,UAAnC,CAPiC,CAOc;AAClD","sourcesContent":["\"use strict\";\n/**\n * @file 异步加载css和script\n * @author hedongran\n * @email hdr01@126.com\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.requireScript = exports.requireCss = void 0;\nvar headElement = document.head || document.getElementsByTagName('head')[0];\nvar _importedScript = {};\n/**\n * load dependency by css tag\n */\nfunction requireCss(src) {\n    return new Promise(function (resolve, reject) {\n        if (src in _importedScript) {\n            resolve();\n            return;\n        }\n        var script = document.createElement('link');\n        script.type = 'text/css';\n        script.rel = 'stylesheet';\n        script.href = src;\n        // 加载失败\n        script.onerror = function (err) {\n            headElement.removeChild(script);\n            reject(new URIError(\"The css \" + src + \" is no accessible.\"));\n        };\n        // 加载成功\n        script.onload = function () {\n            _importedScript[src] = true;\n            resolve();\n        };\n        headElement.appendChild(script);\n    });\n}\nexports.requireCss = requireCss;\n/**\n * load dependency by script tag\n */\nfunction requireScript(src) {\n    return new Promise(function (resolve, reject) {\n        if (src in _importedScript) {\n            resolve();\n            return;\n        }\n        var script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = src;\n        // 加载失败\n        script.onerror = function (err) {\n            headElement.removeChild(script);\n            reject(new URIError(\"The Script \" + src + \" is no accessible.\"));\n        };\n        // 加载成功\n        if (isImplementedOnload(script)) {\n            // Firefox, Safari, Chrome, and Opera\n            script.onload = function () {\n                _importedScript[src] = true;\n                resolve();\n            };\n        }\n        else {\n            // IE\n            script.onreadystatechange = function () {\n                if (script.readyState == 'loaded' || script.readyState == 'complete') {\n                    script.onreadystatechange = null;\n                    _importedScript[src] = true;\n                    resolve();\n                }\n            };\n        }\n        headElement.appendChild(script);\n    });\n}\nexports.requireScript = requireScript;\nfunction isImplementedOnload(script) {\n    script = script || document.createElement('script');\n    if ('onload' in script) {\n        return true;\n    }\n    // @ts-ignore\n    script.setAttribute('onload', '');\n    return typeof script['onload'] === 'function'; // ff true ie false .\n}\n"]},"metadata":{},"sourceType":"script"}